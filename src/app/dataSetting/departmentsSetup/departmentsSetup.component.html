<div id="departments">
  <div nz-row class="departments_head">
    <div nz-col [nzSpan]="7">
      <span>学院名称</span>
      <nz-input
        style="width: 80%;"
        [(ngModel)]="searchParam"
        [nzPlaceHolder]="'请输入学院名称'"
        (ngModelChange)="_console($event)">
      </nz-input>
    </div>
    <button nz-col nz-col [nzSpan]="2" nz-button (click)="search()">搜索</button>
    <button nz-col nz-col [nzSpan]="2" nz-button (click)="showModal1()">批量导入</button>
    <button nz-col nz-col [nzSpan]="2" nz-button (click)="showModal()">手动添加</button>
  </div>
</div>
<div class="departments_table">
  <nz-table #nzTable [nzDataSource]="_dataSet" [nzPageIndex]="page" [nzPageSize]="10" nzShowSizeChanger>
    <thead nz-thead>
    <tr>
      <th nz-th><span>学院名称</span></th>
      <th nz-th><span>专业数量</span></th>
      <th nz-th><span>添加时间</span></th>
      <th nz-th><span>操作</span></th>
    </tr>
    </thead>
    <tbody nz-tbody>
    <tr nz-tbody-tr *ngFor="let data of _dataSet">
      <td nz-td>
        <a>{{data.name}}</a>
      </td>
      <td nz-td>{{data.age}}</td>
      <td nz-td>{{data.address}}</td>
      <td nz-td>
        <a class="a-click" routerLink="/index/industrySetup">查看专业</a>
        <a class="a-click" (click)="showEditModal(data.name)">编辑</a>
        <a class="a-click" >
          <nz-popconfirm [nzTitle]="'确定删除专业'"
                         [nzOkText]="'确定'"
                         [nzCancelText]="'取消'"
                         (nzOnConfirm)="deleteDepartments(data.id)"
                         (nzOnCancel)="cancel()"
          >
            <a nz-popconfirm>删除</a>
          </nz-popconfirm></a>
      </td>
    </tr>
    </tbody>
  </nz-table>
</div>

<!--add-->
<nz-modal [nzVisible]="isVisible"
          [nzTitle]="'手动添加'"
          [nzOkText]="'提交'"
          [nzCancelText]="'取消'"
          [nzContent]="modalContent"
          (nzOnCancel)="handleCancel($event)"
          (nzOnOk)="addDepartments()"
>
  <ng-template #modalContent>
    <div id="template">
      <div>
        <nz-input [(ngModel)]="academy_name" [nzPlaceHolder]="'请输入学院名'">
          <ng-template #addOnBefore>学院名称</ng-template>
        </nz-input>
        <div>{{msg}}</div>
      </div>
    </div>
  </ng-template>
</nz-modal>
<!--edit-->
<nz-modal [nzVisible]="isEditVisible"
          [nzTitle]="'编辑'"
          [nzOkText]="'提交'"
          [nzCancelText]="'取消'"
          [nzContent]="editModalContent"
          (nzOnCancel)="handleCancel($event)"
          (nzOnOk)="editDepartments()"
>
  <ng-template #editModalContent>
    <div id="template1">
      <div>
        <nz-input [(ngModel)]="editName">
          <ng-template #editOnBefore>学院名称</ng-template>
        </nz-input>
        <!--<div>{{msg}}</div>-->
      </div>
    </div>
  </ng-template>
</nz-modal>

<nz-modal [nzVisible]="isVisible1"
          [nzTitle]="'批量导入'"
          [nzOkText]="'提交'"
          [nzCancelText]="'取消'"
          [nzContent]="modalContent1"
          (nzOnCancel)="handleCancel($event)"
          (nzOnOk)="handleOk($event)"
>
  <ng-template #modalContent1>
    <div>
      <span>下载模板</span>
      <button nz-button="">下载模板</button>
    </div>
    <div>
      <span>选择上传文件</span>
      <nz-upload
        nzAction="https://jsonplaceholder.typicode.com/posts/"
        [nzFileList]="fileList">
        <button nz-button>
          <i class="anticon anticon-upload"></i><span>Upload</span>
        </button>
      </nz-upload>
    </div>
  </ng-template>
</nz-modal>
