<div id="auditRecordContent">
  <div class="auditRecord_head">
    <!-- 查询时间段 -->
    <div class="timeSelect_area">
        <div class="register">
            <span>
                注册时间：
            </span>
            <nz-datepicker [(ngModel)]="registerBeginTime" nzShowTime [nzPlaceHolder]="'选择开始时间'" [nzFormat]="'YYYY-MM-DD HH:mm:ss'"></nz-datepicker>
            <span>至</span>
            <nz-datepicker [(ngModel)]="registeEndrTime" nzShowTime [nzPlaceHolder]="'选择结束时间'" [nzFormat]="'YYYY-MM-DD HH:mm:ss'"></nz-datepicker>
        </div>
        <div class="joinSchool">
            <span>
                入学时间：
            </span>
            <nz-datepicker [(ngModel)]="joinBeginTime" nzShowTime [nzPlaceHolder]="'选择开始时间'" [nzFormat]="'YYYY-MM-DD HH:mm:ss'"></nz-datepicker>
            <span>至</span>
            <nz-datepicker [(ngModel)]="joinEndrTime" nzShowTime [nzPlaceHolder]="'选择结束时间'" [nzFormat]="'YYYY-MM-DD HH:mm:ss'"></nz-datepicker>
        </div>
    </div>
    <!-- 查询条件、下拉框 -->
    <div class="conditionSelect_area">
      <div class="top">
          <div class="name">
            <span>
                姓名：
            </span>
            <nz-input class="selectInput" style="width: 150px;" [(ngModel)]="userName" [nzPlaceHolder]="'Basic usage'"></nz-input>
          </div>
          <div class="ID_card">
            <span>
                身份证：
            </span>
            <nz-input class="selectInput" style="width: 150px;" [(ngModel)]="IDcard" [nzPlaceHolder]="'Basic usage'"></nz-input>
          </div>
          <div class="phone">
            <span>
                手机：
            </span>
            <nz-input class="selectInput" style="width: 150px;" [(ngModel)]="phone" [nzPlaceHolder]="'Basic usage'"></nz-input>
          </div>
      </div>
      <div class="bottom">
          <div class="college">
            <span>
                学院：
            </span>
            <nz-select  class="selectInput" style="width: 100px;" [(ngModel)]="collegeSelected" (ngModelChange) = 'collegeChange($event)' [nzPlaceHolder]="'请选择学院'" nzAllowClear>
                <nz-option
                  *ngFor="let item of collegeOptions"
                  [nzLabel]="item.academy_name"
                  [nzValue]="item.id"
                  [nzDisabled]="item.disabled">
                </nz-option>
            </nz-select>
          </div>
          <div class="major">
            <span>
                专业：
            </span>
            <nz-select  class="selectInput" style="width: 100px;" [(ngModel)]="majorSelected" [nzPlaceHolder]="'请选择学历'" nzAllowClear>
                <nz-option
                  *ngFor="let item of majorOptions"
                  [nzLabel]="item.major_name"
                  [nzValue]="item.id"
                  [nzDisabled]="item.disabled">
                </nz-option>
            </nz-select>
          </div>
          <div class="education">
            <span>
                学历：
            </span>
            <nz-select  class="selectInput" class="" style="width: 100px;" [(ngModel)]="educationSelected" [nzPlaceHolder]="'请选择学历'" nzAllowClear>
                <nz-option
                  *ngFor="let item of educationOptions"
                  [nzLabel]="item.label"
                  [nzValue]="item.value"
                  [nzDisabled]="item.disabled">
                </nz-option>
            </nz-select>
          </div>
          <div class="education">
            <span>
                审核状态：
            </span>
            <nz-select  class="selectInput" class="" style="width: 100px;" [(ngModel)]="auditStatusSelected" [nzPlaceHolder]="'请选择状态'" nzAllowClear>
                <nz-option
                  *ngFor="let item of auditStatusOptions"
                  [nzLabel]="item.label"
                  [nzValue]="item.value"
                  [nzDisabled]="item.disabled">
                </nz-option>
            </nz-select>
          </div>
      </div>
    </div>
    <!-- 搜索 -->
    <div class="search">    
      <button nz-button (click) = 'handlerSearch()' [nzType]="'primary'">
        <span>搜索</span>
      </button>
    </div>

  </div>

    <!-- 表格 -->
    <div class="auditRecord_table">
      <div class="table">
          <nz-table #nzTable 
            [nzDataSource]="data"
            [nzBordered] = "borderShow"
            [nzLoading] = "spinShow"
            [nzIsPagination]="false"
          >
          <thead nz-thead>
            <tr>
              <th nz-th><span>审核时间</span></th>
              <th nz-th><span>审核人</span></th>
              <th nz-th><span>审核状态</span></th>
              <th nz-th><span>注册时间</span></th>
              <th nz-th><span>姓名</span></th>
              <th nz-th><span>手机</span></th>
              <th nz-th><span>身份证号</span></th>
              <th nz-th><span>男</span></th>
              <th nz-th><span>入学时间</span></th>
              <th nz-th><span>学院</span></th>
              <th nz-th><span>专业</span></th>
              <th nz-th><span>学历</span></th>
            </tr>
          </thead>
          <tbody nz-tbody>
            <tr nz-tbody-tr *ngFor="let data of nzTable.data">
              <td nz-td>
                {{data.update_at}}
              </td>
              <td nz-td>
                {{data.examine_user}}
              </td>
              <td nz-td>
                {{data.examine_stat === 1?'通过':[data.examine_stat === 2?'不通过':'待审核']}}
              </td>
              <td nz-td>
                {{data.created_at}}
              </td>
              <td nz-td   (click)="showInfoModal(data)"  style="color: blue; cursor: pointer;">
                {{data.user_name}}
              </td>
              <td nz-td>
                {{data.contact_phone}}
              </td>
              <td nz-td>
                {{data.id_number}}
              </td>
              <td nz-td>
                {{data.gender === 1?'男':[data.gender === 2?'女':'未知']}}
              </td>
              <td nz-td>
                {{data.academic_starts}}
              </td>
              <td nz-td>
                {{data.academy}}
              </td>
              <td nz-td>
                {{data.profession}}
              </td>
              <td nz-td>
                {{data.education}}
              </td>
            </tr>
          </tbody>
        </nz-table>
      </div>
      <div class="page" *ngIf="data.length > 0">
        <nz-pagination
            [nzPageIndex]="currentPage"
            [nzPageSize] = '15'
            [nzTotal]="totalPage"
            (nzPageIndexClickChange) = 'currentPageChange($event)'
            nzShowTotal>
        </nz-pagination>
      </div>

  <!-- 资料模态框 -->
  <nz-modal [nzVisible]="inforVisible" [nzStyle]="modelStyle" [nzTitle]="'校友资料'" [nzContent]="modalContent" [nzFooter]="modelFooter" (nzOnCancel)="closeInforModel($event)">
    <ng-template #modalContent>
      <div id="examineModel">
          <div class="examineModel_head">
            <div>
              <img class="headImg" src="{{userInfo.avatar}}" />
            </div>
            <div>
              <ul>
                <li>
                  <span><b class="weight">姓名：</b> {{userInfo.user_name}}</span>
                  <span  style="margin-left: 10px;"><b class="weight">性别：</b>{{userInfo.gender === 1?'男':[userInfo.gender === '2'?'女':'未知']}}</span>
                </li>
                <li>
                  <span><b class="weight">手机：</b></span>
                  {{userInfo.contact_phone}}
                </li>
                <li>
                  <span><b class="weight">身份证：</b></span>
                  {{userInfo.id_number}}
                </li>
                <li>
                  <span><b class="weight">目前所在地：</b></span>
                  {{userInfo.province}} {{userInfo.city}} 
                </li>
              </ul>
            </div>
          </div>
          <div class="examineModel_middle">
            <ul>
              <li>
                <b class="weight">入学时间：</b>{{userInfo.academic_starts}}
              </li>
              <li>
                <b class="weight">学院：</b>{{userInfo.academy}}
              </li>
              <li>
                <b class="weight">专业：</b>{{userInfo.profession}}
              </li>
              <li>
                <b class="weight">学历：</b>{{userInfo.education}}
              </li>
            </ul>
          </div>
          <div class="examineModel_bottom">
            <ul>
              <li>
                <b class="weight">公司名称：</b> {{userInfo.company_batch === undefined?'暂无':userInfo.company_batch.company_name}}
              </li>
              <li>
                <b class="weight">职位名称：</b> {{userInfo.company_batch === undefined?'暂无':userInfo.company_batch.job_title}}
              </li>
              <li>
                <b class="weight">所属行业：</b> {{userInfo.company_batch === undefined?'暂无':userInfo.company_batch.industry_involved}}
              </li>
            </ul>
            <p>
              <b class="weight">一句话介绍：</b>
            </p>
            <p>
              {{userInfo.a_word_introduce}}
            </p>
          </div>
      </div>
    </ng-template>
    <ng-template  #modelFooter>
      <div class="examineModel_control">
        <button nz-button (click) = 'closeInforModel($event)' [nzType]="'default'">
            <span>关 闭</span>
        </button>
      </div>
    </ng-template>
  </nz-modal>

</div>